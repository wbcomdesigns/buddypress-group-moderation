($=>{function log(message,data=null){window.console&&window.console.log&&(console.log("BP Group Moderation: "+message),null!==data)&&console.log(data)}function handleGroupAction(button,actionType){var groupId=button.data("group-id"),row=$("#group-"+groupId),groupId=(log("Action initiated: "+actionType+" for group "+groupId),{action:"bp_group_moderation_handle_group",action_type:actionType,group_id:groupId,nonce:bpGroupModeration.nonce});log("AJAX URL:",bpGroupModeration.ajaxUrl),log("AJAX Payload:",groupId),button.prop("disabled",!0).text(bpGroupModeration.loadingText),row.find(".bp-group-"+("approve"===actionType?"reject":"approve")).prop("disabled",!0),$.ajax({url:bpGroupModeration.ajaxUrl,type:"POST",data:groupId,success:function(response){log("AJAX Success:",response),response.success?($("#bp-group-moderation-messages").html('<div class="notice notice-success is-dismissible"><p>'+response.data.message+"</p></div>"),row.fadeOut(500,function(){$(this).remove(),0===$(".bp-group-moderation-table tbody tr").length&&$(".bp-group-moderation-table").replaceWith('<div class="bp-group-moderation-no-items"><p>No pending groups found.</p></div>')})):($("#bp-group-moderation-messages").html('<div class="notice notice-error is-dismissible"><p>'+response.data.message+"</p></div>"),button.prop("disabled",!1).text("approve"===actionType?bpGroupModeration.approveText:bpGroupModeration.rejectText),row.find(".bp-group-"+("approve"===actionType?"reject":"approve")).prop("disabled",!1))},error:function(xhr,status,error){log("AJAX Error: "+status+" - "+error),log("AJAX Response Text:",xhr.responseText),$("#bp-group-moderation-messages").html('<div class="notice notice-error is-dismissible"><p>An error occurred while processing the request: '+error+"</p><pre>"+xhr.responseText+"</pre></div>"),button.prop("disabled",!1).text("approve"===actionType?bpGroupModeration.approveText:bpGroupModeration.rejectText),row.find(".bp-group-"+("approve"===actionType?"reject":"approve")).prop("disabled",!1)}})}$(document).on("click",".bp-group-approve",function(e){e.preventDefault(),handleGroupAction($(this),"approve")}),$(document).on("click",".bp-group-reject",function(e){e.preventDefault(),confirm(bpGroupModeration.confirmReject)&&handleGroupAction($(this),"reject")}),$(document).on("click",".notice-dismiss",function(){$(this).closest(".notice").fadeOut(300,function(){$(this).remove()})}),log("Admin JavaScript Initialized"),log("Localized Object:",bpGroupModeration);for(var bpolls_elmt=document.getElementsByClassName("wbcom-faq-accordion"),bpolls_elmt_len=bpolls_elmt.length,k=0;k<bpolls_elmt_len;k++)bpolls_elmt[k].onclick=function(){this.classList.toggle("active");var panel=this.nextElementSibling;panel.style.maxHeight?panel.style.maxHeight=null:panel.style.maxHeight=panel.scrollHeight+"px"}})(jQuery);